<!DOCTYPE html>
<html>
<head>
  <title>Load Sample Data - Lumi√®re Caf√©</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 50px auto;
      padding: 30px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    .card {
      background: white;
      padding: 40px;
      border-radius: 15px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    }
    h1 { color: #333; margin-bottom: 10px; }
    .subtitle { color: #666; margin-bottom: 30px; }
    .btn {
      background: #8B4513;
      color: white;
      border: none;
      padding: 15px 40px;
      font-size: 18px;
      border-radius: 8px;
      cursor: pointer;
      margin: 10px 5px;
      transition: all 0.3s;
    }
    .btn:hover {
      background: #654321;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }
    .btn:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
    }
    .success { color: green; font-size: 20px; margin: 20px 0; }
    .error { color: red; font-size: 16px; margin: 20px 0; }
    .info {
      background: #e3f2fd;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
    }
    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }
    .stat-card {
      background: #f5f5f5;
      padding: 20px;
      border-radius: 8px;
      text-align: center;
    }
    .stat-number {
      font-size: 36px;
      font-weight: bold;
      color: #8B4513;
    }
    .stat-label {
      color: #666;
      margin-top: 5px;
    }
    .progress {
      width: 100%;
      height: 30px;
      background: #f0f0f0;
      border-radius: 15px;
      overflow: hidden;
      margin: 20px 0;
      display: none;
    }
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #8B4513, #654321);
      width: 0%;
      transition: width 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>üéØ Load Sample Data</h1>
    <div class="subtitle">Populate your caf√© with realistic demo data</div>
    
    <div class="info">
      <strong>üì¶ What will be loaded:</strong>
      <div class="stats">
        <div class="stat-card">
          <div class="stat-number" id="customerCount">500+</div>
          <div class="stat-label">Customers</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="menuCount">100</div>
          <div class="stat-label">Menu Items</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="orderCount">750+</div>
          <div class="stat-label">Orders</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">~25/day</div>
          <div class="stat-label">Avg Orders</div>
        </div>
      </div>
    </div>

    <div class="progress" id="progress">
      <div class="progress-bar" id="progressBar">0%</div>
    </div>
    
    <button class="btn" onclick="loadSampleData()" id="loadBtn">
      üì• Load Sample Data
    </button>
    <button class="btn" onclick="clearData()">
      üóëÔ∏è Clear All Data
    </button>
    <button class="btn" onclick="goHome()">
      üè† Go to Homepage
    </button>
    
    <div id="message"></div>
  </div>

  <script src="./sampleDataFull.json" type="application/json" id="sampleDataScript"></script>
  <script>
    async function loadSampleData() {
      const loadBtn = document.getElementById('loadBtn');
      const message = document.getElementById('message');
      const progress = document.getElementById('progress');
      const progressBar = document.getElementById('progressBar');
      
      loadBtn.disabled = true;
      message.innerHTML = '<p>‚è≥ Loading sample data...</p>';
      progress.style.display = 'block';
      
      try {
        // Fetch the generated data
        const response = await fetch('./sampleDataFull.json');
        const sampleData = await response.json();
        
        progressBar.style.width = '30%';
        progressBar.textContent = '30%';
        
        message.innerHTML += '<p>‚úì Data loaded from file</p>';
        
        // Get existing data structure or create new
        let cafeData = localStorage.getItem('cafe_data');
        let data;
        
        if (cafeData) {
          data = JSON.parse(cafeData);
        } else {
          data = {
            users: [],
            menu: [],
            orders: [],
            reservations: [],
            coupons: [],
            gallery: [],
            reviews: [],
            features: [],
            team: [],
            about: [],
            contact: []
          };
        }
        
        progressBar.style.width = '50%';
        progressBar.textContent = '50%';
        
        // Add staff users (admin, manager, chef, waiter, content_editor, viewer)
        const staffUsers = [
          {
            id: 'admin001',
            table_type: 'user',
            name: 'Admin User',
            email: 'admin@lumierecafe.com',
            password: 'Admin@123',
            phone: '+1-555-0100',
            role: 'admin',
            avatar: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100',
            address_street: '123 Admin Ave',
            address_city: 'New York',
            address_state: 'NY',
            address_zipcode: '10001',
            address_country: 'USA',
            favorite_items: [],
            permissions: ['all'],
            refresh_token: '',
            is_active: true,
            email_verified: true,
            created_at: new Date().toISOString(),
            updated_at: new Date().toISOString()
          },
          {
            id: 'manager001',
            table_type: 'user',
            name: 'Sarah Manager',
            email: 'manager@lumierecafe.com',
            password: 'Manager@123',
            phone: '+1-555-0103',
            role: 'manager',
            avatar: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100',
            address_street: '321 Management St',
            address_city: 'New York',
            address_state: 'NY',
            address_zipcode: '10004',
            address_country: 'USA',
            favorite_items: [],
            permissions: ['users.view', 'users.edit', 'orders.view', 'orders.edit', 'menu.view', 'menu.edit', 'reservations.view', 'reservations.edit', 'coupons.view', 'coupons.edit', 'analytics.view'],
            refresh_token: '',
            is_active: true,
            email_verified: true,
            created_at: new Date().toISOString(),
            updated_at: new Date().toISOString()
          },
          {
            id: 'chef001',
            table_type: 'user',
            name: 'Chef Marco',
            email: 'chef@lumierecafe.com',
            password: 'Chef@123',
            phone: '+1-555-0101',
            role: 'chef',
            avatar: 'https://images.unsplash.com/photo-1577219491135-ce391730fb2c?w=100',
            address_street: '456 Kitchen Blvd',
            address_city: 'New York',
            address_state: 'NY',
            address_zipcode: '10002',
            address_country: 'USA',
            favorite_items: [],
            permissions: ['orders.view', 'orders.edit', 'menu.view'],
            refresh_token: '',
            is_active: true,
            email_verified: true,
            created_at: new Date().toISOString(),
            updated_at: new Date().toISOString()
          },
          {
            id: 'waiter001',
            table_type: 'user',
            name: 'Alex Server',
            email: 'waiter@lumierecafe.com',
            password: 'Waiter@123',
            phone: '+1-555-0102',
            role: 'waiter',
            avatar: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100',
            address_street: '789 Service St',
            address_city: 'New York',
            address_state: 'NY',
            address_zipcode: '10003',
            address_country: 'USA',
            favorite_items: [],
            permissions: ['orders.view', 'orders.create', 'reservations.view', 'reservations.edit'],
            refresh_token: '',
            is_active: true,
            email_verified: true,
            created_at: new Date().toISOString(),
            updated_at: new Date().toISOString()
          },
          {
            id: 'editor001',
            table_type: 'user',
            name: 'Emma Editor',
            email: 'editor@lumierecafe.com',
            password: 'Editor@123',
            phone: '+1-555-0104',
            role: 'content_editor',
            avatar: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100',
            address_street: '654 Content Ln',
            address_city: 'New York',
            address_state: 'NY',
            address_zipcode: '10005',
            address_country: 'USA',
            favorite_items: [],
            permissions: ['menu.view', 'menu.edit', 'content.view', 'content.edit', 'gallery.view', 'gallery.edit'],
            refresh_token: '',
            is_active: true,
            email_verified: true,
            created_at: new Date().toISOString(),
            updated_at: new Date().toISOString()
          },
          {
            id: 'viewer001',
            table_type: 'user',
            name: 'John Viewer',
            email: 'viewer@lumierecafe.com',
            password: 'Viewer@123',
            phone: '+1-555-0105',
            role: 'viewer',
            avatar: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100',
            address_street: '987 View Rd',
            address_city: 'New York',
            address_state: 'NY',
            address_zipcode: '10006',
            address_country: 'USA',
            favorite_items: [],
            permissions: ['analytics.view', 'reports.view'],
            refresh_token: '',
            is_active: true,
            email_verified: true,
            created_at: new Date().toISOString(),
            updated_at: new Date().toISOString()
          }
        ];
        
        // Merge data
        data.users = [...staffUsers, ...sampleData.customers];
        data.menu = sampleData.menuItems;
        data.orders = sampleData.orders;
        
        progressBar.style.width = '75%';
        progressBar.textContent = '75%';
        
        message.innerHTML += '<p>‚úì Merging data...</p>';
        
        // Save to localStorage
        localStorage.setItem('cafe_data', JSON.stringify(data));
        
        progressBar.style.width = '100%';
        progressBar.textContent = '100%';
        
        message.innerHTML = `
          <div class="success">
            <h2>‚úÖ Sample Data Loaded Successfully!</h2>
            <p><strong>Loaded:</strong></p>
            <ul>
              <li>üë• ${data.users.length} users (including ${staffUsers.length} staff)</li>
              <li>üçï ${data.menu.length} menu items</li>
              <li>üì¶ ${data.orders.length} orders</li>
            </ul>
            <p>Redirecting to homepage in 3 seconds...</p>
          </div>
        `;
        
        setTimeout(() => {
          window.location.href = '/';
        }, 3000);
        
      } catch (error) {
        message.innerHTML = `
          <div class="error">
            <h3>‚ùå Error loading data</h3>
            <p>${error.message}</p>
            <p>Make sure sampleDataFull.json exists in the same directory.</p>
          </div>
        `;
        loadBtn.disabled = false;
        progress.style.display = 'none';
      }
    }
    
    function clearData() {
      if (!confirm('Are you sure? This will delete ALL data!')) return;
      
      localStorage.clear();
      sessionStorage.clear();
      
      document.getElementById('message').innerHTML = '<div class="success">‚úÖ All data cleared! Reload the page to reinitialize.</div>';
    }
    
    function goHome() {
      window.location.href = '/';
    }
  </script>
</body>
</html>
